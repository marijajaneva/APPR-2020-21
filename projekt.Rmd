---
title: "Analiza notranjih selitev in stanovanjskih pogojev v Sloveniji"
author: "Marija Janeva"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

V svoji projektni nalogi bom analizirala selitve po regijah v Sloveniji od leta 2000 do leta 2020. Ugotovila bom kakšni so razlogi za selitev iz ene regije v drugo in pri katerih letih se največ prebivalstva odloči za selitev. Pogledala bom tudi kolikšna je stopnja prenaseljenosti stanovanj po regijah. Potem bom analizirala še kakšne so stanovanjske razmere, kolikšno breme predstavljajo stanovanjski stroški in ali so to eni izmed razlogov za selitev.

![](slike/grb.png)

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Uvoziila sem podatke v obliki CSV s statističnega urada: https://pxweb.stat.si/SiStat/sl. Podatke imam v štirih razpredelnicah v obliki *tidy data*.


 1. [Notranje selitve po regijah](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/Data/05N2004S.px/table/tableViewLayout2/)
  - `regija odselitve` - spremenljivka: ime regije iz katere so se prebivalci izselili((besedilo),
  - `regija priselitve` - spremenljivka: ime regije, v katero so se prebivalci preselili(besedilo),
  - `leto` - spremenljivka: katerega leta so se prebivalci preselili iz ene regije v drugo(število),
  - `stevilo oseb` - meritev: število oseb, ki se je preselilo oz ene regije v drugo(število)
  
 2. [Notranje selitve po starostnih skupinah](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/Data/05N2002S.px/table/tableViewLayout2/) 
  - `starostna skupina` - spremenljivka: starostna skupina, pri kateri se je prebivalstvo preselilo,
  - `leto` - spremenljivka - v katerem leto so se prebivalci preselili,
  - `število oseb` - meritev: število oseb, ki se je preselilo, v danem letu pri določeni starostni skupini.
  
 3. [Stanovanjske razmere](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/Data/0867725S.px/table/tableViewLayout2/)
  - `leto` - spremenljivka: kakšne stanovanjske razmere so bile v danem letu ,
  - `regija` - spremenljivka : kakšne stanovanjske razmere so bile v določeni regiji(besedilo),
  - `slabo stanje stanovanja` - spremenljivka: delež gospodinjstev, ki imajo težave s streho, ki pušča, z vlažnimi stenami ipd.(besedilo)
  - `ni primernega ogrevanja` - spremenljivka: delež gospodinjstev, ki si ne morejo privoščiti primernega ogrevanja stanovanja (besedilo),
  - `premalo svetlobe` - spremenljivka: delež gospodinjstev, ki imajo pretemno stanovanje oz. ne dobijo dovolj dnevne svetlobe (besedilo),
  - `težave s hrupom` - spremenljivka: delež gospodinjstev, ki imajo težave s hrupom sosedov ali hrupom z ulice(promet, tovarne, podjetja ipd.)(besedilo)
  - `onesnaženost okolja` - spremenljivka: delež gospodinjstev, ki imajo težavo z onesnaženostjo okolja, umazanijo ali drugimi okoljskimi problemi, ki jih povzroča promet in industrija (besedilo)
  - `prisotnost kriminala`: spremenljivka: delež gospodinjstev, ki imajo težave s kriminalom in nasiljem v okolju, kjer živijo (besedilo)
  - `število gospodinjstev`- meritev: število gospodinjstev, ki imajo probleme z določenimi stanovanjskimi razmerami (število)
  
 4. [Stanovanjski stroški](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/Data/0868225S.px/table/tableViewLayout2/)
  -`leto` - spremenljivka: kakšno breme so prebivalcem predstavljali stanovanjski stroški v danem letu,
  - `regija` - spremenljivka: kakšno breme so prebivalcem predstavljali stanovanjski stroški v dani regiji (besedilo),
  - `veliko breme` - spremenljivka: delež gospodinjstev, ki so jim stanovanjski stroški predstavljali veliko breme (besedilo),
  - `srednja veliko breme` - spremenljivka: delež gospodinjstev, ki so jim stanovanjski stroški predstavljali srednje veliko breme (besedilo),
  - `nizko breme` - spremenljivka: delež gospodinjstev, ki so jim stanovanjski stroški predstavljali nizko breme (besedilo),
  - `število gospodinjstev` - meritev: število gospodinjstev, ki jim stanovanjski stroški predstavljajo veliko, srednje veliko ali nizko breme (število)











Spodnji graf prikazuje porazdelitev števila naselij v občinah.

```{r histogram, fig.align='center', fig.cap='Histogram števila naselij v občinah'}
ggplot(obcine, aes(x=naselja)) + geom_histogram() +
  ggtitle("Pogostost števila naselij") + xlab("Število naselij") + ylab("Število občin")
```

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Spodnji zemljevid prikazuje povprečno velikost družine za vsako občino.

```{r zemljevid, fig.align='center', fig.cap='Zemljevid povprečnega števila otrok v družini'}
tm_shape(merge(zemljevid, povprecja, by.x="OB_UIME", by.y="obcina")) +
  tm_polygons("povprecje", title="Povprečje") +
  tm_layout(title="Povprečno število otrok v družini")
```

***

# Napredna analiza podatkov

```{r analiza}
source("analiza/analiza.r", encoding="UTF-8")
```

Spodnji graf prikazuje povezavo med številom naselij in površino občine.


***

```{r shiny}
shinyAppDir("shiny", options=list(width="100%", height=600))
```
